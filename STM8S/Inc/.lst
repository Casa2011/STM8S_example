q                                     1 XH3
q                                     2 H 2 areas 3 global symbols
o     000000                          3 M ubs_init
o     000000                          4 S .__.ABS. Def000000
o     000000                          5 A _CODE size 0 flags 0 addr 0
o     000000                          6 A CODE size CE flags 0 addr 0
o     000000                          7 S _GPIO_Init Def000000
o     000000                          8 S _TIM1_Init Def000049
q                                     9 T 00 00 00
q                                    10 R 00 00 00 01
q                                    11 T 00 00 00 72 5F 50 02 72 5F 50 03 72 5F 50 04 72
q                                    12 R 00 00 00 01
q                                    13 T 00 00 0D 5F 50 11 72 5F 50 12 72 5F 50 13 72 5F
q                                    14 R 00 00 00 01
q                                    15 T 00 00 1A 50 0C 72 5F 50 0D 72 5F 50 0E 72 16
q                                    16 R 00 00 00 01
q                                    17 T 00 00 26 50 02 72 16 50 03 72 16 50 04 72 1C
q                                    18 R 00 00 00 01
q                                    19 T 00 00 32 50 0C 72 1C 50 0D 72 1C 50 0E 72 1A
q                                    20 R 00 00 00 01
q                                    21 T 00 00 3E 50 0C 72 1A 50 0D 72 1A 50 0E 81
q                                    22 R 00 00 00 01
q                                    23 T 00 00 49
q                                    24 R 00 00 00 01
q                                    25 T 00 00 49 9B C6 50 C5 AA 02 C7 50 C5 A4 FB C7
q                                    26 R 00 00 00 01
q                                    27 T 00 00 55 50 C5 35 B4 50 C4
q                                    28 R 00 00 00 01
q                                    29 T 00 00 5B
q                                    30 R 00 00 00 01
q                                    31 T 00 00 5B 44 25 FD C6 50 C0 A4 FE C7 50 C0 35 00
q                                    32 R 00 00 00 01
q                                    33 T 00 00 68 50 C6 72 1E 50 C7 35 03 52 62 35 E7
q                                    34 R 00 00 00 01
q                                    35 T 00 00 74 52 63 35 00 52 60 35 00 52 61 C6 52 50
q                                    36 R 00 00 00 01
q                                    37 T 00 00 81 A4 8F C7 52 50 35 00 52 64 72 19 52 5C
q                                    38 R 00 00 00 01
q                                    39 T 00 00 8E C6 52 59 AA 21 C7 52 59 C6 52 5C A4 DF
q                                    40 R 00 00 00 01
q                                    41 T 00 00 9B C7 52 5C AA 10 C7 52 5C C6 52 59 A4 F3
q                                    42 R 00 00 00 01
q                                    43 T 00 00 A8 C7 52 59 C6 52 52 A4 8F AA 60 C7 52 52
q                                    44 R 00 00 00 01
q                                    45 T 00 00 B5 A4 F8 AA 06 C7 52 52 35 FB 52 55 35 1E
q                                    46 R 00 00 00 01
q                                    47 T 00 00 C2 52 56 C6 52 54 AA 04 C7 52 54 9A 81
q                                    48 R 00 00 00 01
                                      1 .module ubs_init
                                      2 .globl _GPIO_Init
                                      3 .globl _TIM1_Init
i                                     4 .include "stm8s003f.inc"
                                      5 .area CODE
                                      6 
      000000                          7 _GPIO_Init:
      000000 72 5Fu00u00      [ 1]    8 	clr PA_DDR
      000004 72 5Fu00u00      [ 1]    9 	clr PA_CR1
      000008 72 5Fu00u00      [ 1]   10 	clr PA_CR2
                                     11 
      00000C 72 5Fu00u00      [ 1]   12 	clr PD_DDR
      000010 72 5Fu00u00      [ 1]   13 	clr PD_CR1
      000014 72 5Fu00u00      [ 1]   14 	clr PD_CR2
                                     15 
      000018 72 5Fu00u00      [ 1]   16 	clr PC_DDR
      00001C 72 5Fu00u00      [ 1]   17 	clr PC_CR1
      000020 72 5Fu00u00      [ 1]   18 	clr PC_CR2
                                     19 
      000024 72 16u00u00      [ 1]   20 	bset PA_DDR, #3 ; out
      000028 72 16u00u00      [ 1]   21 	bset PA_CR1, #3 ; PP
      00002C 72 16u00u00      [ 1]   22 	bset PA_CR2, #3	; fast
                                     23 
      000030 72 1Cu00u00      [ 1]   24 	bset PC_DDR, #6 ; out
      000034 72 1Cu00u00      [ 1]   25 	bset PC_CR1, #6 ; PP
      000038 72 1Cu00u00      [ 1]   26 	bset PC_CR2, #6	; fast
                                     27 
      00003C 72 1Au00u00      [ 1]   28 	bset PC_DDR, #5 ; out
      000040 72 1Au00u00      [ 1]   29 	bset PC_CR1, #5 ; PP
      000044 72 1Au00u00      [ 1]   30 	bset PC_CR2, #5	; fast
      000048 81               [ 4]   31 	ret
                                     32 
      000049                         33 	_TIM1_Init:
      000049 9B               [ 1]   34 	sim
                                     35 	;mov	0x50c6, #0x00
                                     36 	;mov	0x5003, #0x08
                                     37 	;mov	0x5004, #0x08
                                     38 	;mov	0x5002, #0x08
                                     39 	;mov	0x500d, #0x00
                                     40 	;mov	0x500e, #0x00
                                     41 	;mov	0x500c, #0x3f
                                     42 	;mov	0x500a, #0x00
      00004A C6 50 C5         [ 1]   43 	ld	a, 0x50c5
      00004D AA 02            [ 1]   44 	or	a, #0x02
      00004F C7 50 C5         [ 1]   45 	ld	0x50c5, a
      000052 A4 FB            [ 1]   46 	and	a, #0xfb
      000054 C7 50 C5         [ 1]   47 	ld	0x50c5, a
      000057 35 B4 50 C4      [ 1]   48 	mov	0x50c4+0, #0xb4
      00005B                         49 l0:
      00005B 44               [ 1]   50 	srl	a
      00005C 25 FD            [ 1]   51 	jrc	l0
      00005E C6 50 C0         [ 1]   52 	ld	a, 0x50c0
      000061 A4 FE            [ 1]   53 	and	a, #0xfe
      000063 C7 50 C0         [ 1]   54 	ld	0x50c0, a
      000066 35 00 50 C6      [ 1]   55 	mov	0x50c6, #0x00
      00006A 72 1E 50 C7      [ 1]   56 	bset	0x50c7,#7
      00006E 35 03 52 62      [ 1]   57 	mov	0x5262, #0x03
      000072 35 E7 52 63      [ 1]   58 	mov	0x5263, #0xe7
      000076 35 00 52 60      [ 1]   59 	mov	0x5260, #0x00
      00007A 35 00 52 61      [ 1]   60 	mov	0x5261, #0x00
      00007E C6 52 50         [ 1]   61 	ld	a, 0x5250
      000081 A4 8F            [ 1]   62 	and	a, #0x8f
      000083 C7 52 50         [ 1]   63 	ld	0x5250, a
      000086 35 00 52 64      [ 1]   64 	mov	0x5264, #0x00
      00008A 72 19 52 5C      [ 1]   65 	bres	21084, #4
      00008E C6 52 59         [ 1]   66 	ld	a, 0x5259
      000091 AA 21            [ 1]   67 	or	a, #0x21
      000093 C7 52 59         [ 1]   68 	ld	0x5259, a
      000096 C6 52 5C         [ 1]   69 	ld	a, 0x525c
      000099 A4 DF            [ 1]   70 	and	a, #0xdf
      00009B C7 52 5C         [ 1]   71 	ld	0x525c, a
      00009E AA 10            [ 1]   72 	or	a, #0x10
      0000A0 C7 52 5C         [ 1]   73 	ld	0x525c, a
      0000A3 C6 52 59         [ 1]   74 	ld	a, 0x5259
      0000A6 A4 F3            [ 1]   75 	and	a, #0xf3
      0000A8 C7 52 59         [ 1]   76 	ld	0x5259, a
      0000AB C6 52 52         [ 1]   77 	ld	a, 0x5252
      0000AE A4 8F            [ 1]   78 	and	a, #0x8f
      0000B0 AA 60            [ 1]   79 	or	a, #0x60
      0000B2 C7 52 52         [ 1]   80 	ld	0x5252, a
      0000B5 A4 F8            [ 1]   81 	and	a, #0xf8
      0000B7 AA 06            [ 1]   82 	or	a, #0x06
      0000B9 C7 52 52         [ 1]   83 	ld	0x5252, a
      0000BC 35 FB 52 55      [ 1]   84 	mov	0x5255, #0xfb
      0000C0 35 1E 52 56      [ 1]   85 	mov	0x5256, #0x1e
      0000C4 C6 52 54         [ 1]   86 	ld	a, 0x5254
      0000C7 AA 04            [ 1]   87 	or	a, #0x04
      0000C9 C7 52 54         [ 1]   88 	ld	0x5254, a
                                     89 	;call	_usb_init
                                     90 	;bres	0x5000,#3
      0000CC 9A               [ 1]   91 	rim
      0000CD 81               [ 4]   92 	ret
